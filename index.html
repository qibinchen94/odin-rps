<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
</head>
<body>
    <script>
        let computerSelection;
        let playerSelection;
        let computerScore = 0;
        let playerScore = 0;
        const choices = ['Rock', 'Paper', 'Scissors'];
        
        playGame();

        function playGame() {
            for (let i = 0; i < 5; i++) {
                computerSelection = computerPlay();
                playerSelection = capitalize(prompt('What\'s your choice? Rock, paper or Scissors?'));
                while (playerSelection !== 'Rock' && 
                        playerSelection !== 'Paper' &&
                        playerSelection !== 'Scissors') {
                    playerSelection = capitalize(prompt('Invalid input, please choose another one')); 
                };
                roundResult = playRound(playerSelection, computerSelection);
                console.log(roundResult[0]);                
                if(roundResult[1] === 'player') playerScore++; 
                else if (roundResult[1] === 'computer') computerScore++; 
            }
            let gameResult = playerScore > computerScore ?
                 'You win' : 
                 ((playerScore === computerScore) ? 
                    'Tie game' :
                    'You lose');
            console.log('Game Over! ' + `${gameResult}`);    
        };


        // Randomly choose from choices = ['Rock', 'Paper', 'Scissors']
        function computerPlay() {
            return choices[Math.floor(Math.random(choices.length)*choices.length)]; 
        };

        function capitalize(str) {
            return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
        }

        // Play the Rock Paper Scissors game.
        // Return an array containing the result message and round winner.
        function playRound(player, computer) {
            let result = ['Tie game!', 'Tie']; // [Round result message, round winner]
            if (player === computer) {
                return result;
            } else if ((player === 'Rock' && computer === 'Scissors') ||
                    (player === 'Paper' && computer === 'Rock') ||
                    (player === 'Scissors' && computer === 'Paper')){
                return result = [`You win! ${player} beats ${computer}`, 'player'];
            } else {
                return result = [`You lose! ${computer} beats ${player}`, 'computer'];
            };
        };
    </script>
</body>
</html>